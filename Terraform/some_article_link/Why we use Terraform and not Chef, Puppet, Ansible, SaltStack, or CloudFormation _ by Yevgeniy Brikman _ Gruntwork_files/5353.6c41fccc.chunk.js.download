(self.webpackChunklite=self.webpackChunklite||[]).push([[5353],{59116:(e,t,n)=>{"use strict";n.d(t,{Te:()=>o,_M:()=>r,ed:()=>s});var o=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){return 2===e.type&&1===e.path.length}))},r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},s=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},78067:(e,t,n)=>{"use strict";var o;n.d(t,{r:()=>o}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(o||(o={}))},5399:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});var o=n(28655),r=n.n(o);function s(){var e=r()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var i=(0,n(71439).Ps)(s())},51176:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var o=n(67294).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},24745:(e,t,n)=>{"use strict";n.d(t,{E:()=>he});var o=n(63038),r=n.n(o),s=n(67294),i=n(24548),a=n(28309),l=function(e){var t=e.title,n=e.backgroundColor,o=(0,a.Iq)();return s.createElement("div",{className:o((function(){return{color:"white",backgroundColor:n,borderRadius:"2px",fontSize:"11px",padding:"0px 6px",height:"16px",display:"flex",alignItems:"center",marginLeft:"8px",marginTop:"2px"}}))},t)},u=n(85740),c=n(34675),p=n(98281),d=n(41832),m=n(7530),f=n(64504),v=n(27572),g=n(67297),h=n(93394),E=n(27952),b=n(59713),R=n.n(b),y=n(46829),P=n(12291),x=n(28774),S=n(2074),O=n(32262),I=n(18970),T=n(62630),D=n(85277);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n,o=e.response,i=e.parentPost,a=e.hidePopoverMenu,l=(0,c.Hk)().value,u=(0,T.Av)(),p=(0,v.pK)(),d=(0,P.I0)(),f=s.useState(!1),g=r()(f,2),h=g[0],E=g[1],b=function(){return E(!1)},R=null==o||null===(t=o.creator)||void 0===t?void 0:t.id,w=(0,y.useMutation)(x.O,{variables:{targetUserId:R,userId:null==l?void 0:l.id},update:function(e){var t={postId:i.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:S.g,variables:t}),o=j(n,R);null!==o&&e.writeQuery({query:S.g,data:o,variables:t})},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:R,viewerEdge:{id:"userId:".concat(R,":viewerId:optimistic"),isBlocking:!0}}},onCompleted:function(){b(),d((0,D.Dx)({message:"Responses by this user have been hidden from this story."}))}}),C=r()(w,1)[0],k=null===(n=i.creator)||void 0===n?void 0:n.id,_=(null==l?void 0:l.id)===k;return(null==l?void 0:l.id)===R?null:l&&R&&_?s.createElement(s.Fragment,null,s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){E(!0)}},"Block this author")),h&&s.createElement(I.r,{onConfirm:function(){u.event("user.blocked",{userId:R,source:p}),C()},isVisible:h,isInResponsesSidebar:!0,hide:function(){b(),a()}})):null},j=function(e,t){var n,o=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!t||null==o||!o.responsesConnection||null===(null==o?void 0:o.count))return null;var r=o.responsesConnection.stream,s=r.filter((function(e){var n,o;return(null===(n=e.itemType.post)||void 0===n||null===(o=n.creator)||void 0===o?void 0:o.id)!==t}));if(s.length===r.length)return null;var i=r.length-s.length;return C(C({},e),{},{post:C(C({},e.post),{},{postResponses:C(C({},o),{},{count:o.count-i,responsesConnection:C(C({},o.responsesConnection),{},{stream:s})})})})},_=n(28655),A=n.n(_),M=n(71439),N=n(14267),B=n(43522),L=n(54260);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e,t){var n,o,r,s,i=e;return i&&null!==(n=i.threadedPostResponses)&&void 0!==n&&null!==(o=n.posts)&&void 0!==o&&o.some((function(e){return e.id===t}))?H(H({},i),{},{postResponses:{count:((null===(r=i.postResponses)||void 0===r?void 0:r.count)||1)-1},threadedPostResponses:H(H({},i.threadedPostResponses),{},{posts:((null===(s=i.threadedPostResponses)||void 0===s?void 0:s.posts)||[]).filter((function(e){return e.id!==t}))})}):null},Q=function(e){var t=e.isDialogOpen,n=e.dialogHeading,o=e.dialogDescription,r=e.cancelDialogAction,i=e.confirmDialogAction,a=e.confirmDialogButtonText,l=e.confirmButtonStyle,u=void 0===l?"STRONG":l,c=e.hide,p=void 0===c?function(){}:c,d=s.useContext(N.D).sidebarRef,v=function(e){var t;null!=d&&null!==(t=d.current)&&void 0!==t&&t.style&&(d.current.style.overflowY=e?"hidden":"")};return s.useEffect((function(){return v(t),function(){v(!1)}}),[t]),s.createElement(m.Vq,{isVisible:t,hide:p,withCloseButton:!1,noPortal:!0,padding:50},s.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},s.createElement(f.X6,{scale:"M"},n),s.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},s.createElement(f.F,{scale:"M",color:"DARKER"},o)),s.createElement(m.xu,{display:"flex",marginBottom:"20px"},s.createElement(m.rU,{onClick:r},s.createElement(f.F,{scale:"M",color:"DARKER"},"Cancel")),s.createElement(m.xu,{marginLeft:"25px"},s.createElement(m.zx,{buttonStyle:u,onClick:i,"data-test-id":"close-discussion-button"},a)))))},V=n(14391),$=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,o=e.confirmDialogAction,r=e.responseDistribution,i=e.hide,a=r===V.Et.DISTRIBUTED,l=a?"Delete response and story":"Delete",u=a?"This response is also a story on your profile. Are you sure you want to delete this response?":s.createElement("div",null,"Deleted responses are gone forever.",s.createElement("br",null),"Are you sure?");return s.createElement(Q,{isDialogOpen:t,dialogHeading:l,dialogDescription:u,cancelDialogAction:n,confirmDialogAction:o,confirmDialogButtonText:"Delete Response",confirmButtonStyle:"ERROR",hide:i})};function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(){var e=A()(["\n  mutation DeleteResponseMutation($responseId: ID!) {\n    deletePost(targetPostId: $responseId)\n  }\n"]);return z=function(){return e},e}var W=(0,M.Ps)(z()),G=function(e){var t,n,o=e.response,i=e.hidePopoverMenu,a=s.useState(!1),l=r()(a,2),u=l[0],p=l[1],d=(0,T.Av)(),f=(0,v.pK)(),g=(0,P.I0)(),h=(0,c.Hk)().value,E=s.useContext(L.H).inResponseToPostId,b=s.useContext(N.D),R=b.responseSortType,x=b.sidebarRef,S=(0,y.useMutation)(W,{variables:{responseId:o.id},update:function(e){var t,n=e.readFragment({id:"Post:".concat(E),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:R}});null!==(t=F(n,o.id))&&(e.writeFragment({id:"Post:".concat(E),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:q({},t),variables:{sortType:R}}),d.event("responses.removed",{postId:o.id,source:f}),g((0,D.Dx)({message:"Successfully deleted response."})),i())}}),I=r()(S,1)[0];return null!=h&&h.id&&(null==h?void 0:h.id)===(null===(t=o.creator)||void 0===t?void 0:t.id)?(null!=x&&x.current&&(n=x.current.scrollTop),s.createElement(s.Fragment,null,s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){return p(!0)}},"Delete")),u&&s.createElement($,{isDialogOpen:u,cancelDialogAction:function(){p(!1),null!=x&&x.current&&(x.current.scrollTop=n)},confirmDialogAction:I,responseDistribution:o.responseDistribution,hide:function(){return p(!1)}}))):null},Y=n(51176),J=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,o=e.confirmDialogAction;return s.createElement(Q,{isDialogOpen:t,dialogHeading:"Edit response and story",dialogDescription:"This response is also a story on your profile. Any edits are applied to both.",cancelDialogAction:n,confirmDialogAction:o,confirmDialogButtonText:"Continue",confirmButtonStyle:"STRONG"})},Z=function(e){var t,n,o=e.response,i=(0,c.Hk)().value,a=s.useState(!1),l=r()(a,2),u=l[0],p=l[1],d=s.useContext(Y.Q),f=d.setIsEditing,v=d.isEditing,g=d.setEditingQuote,h=(null===(t=o.creator)||void 0===t?void 0:t.id)===(null==i?void 0:i.id),E=s.useContext(N.D).sidebarRef;if(null!=E&&E.current&&(n=E.current.scrollTop),!h)return null;var b=o.responseDistribution===V.Et.DISTRIBUTED;return s.createElement(s.Fragment,null,s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){b?p(!0):(o.inResponseToMediaResource&&g(o.inResponseToMediaResource.mediumQuote),f(!v))}},"Edit this response")),u&&s.createElement(J,{isDialogOpen:u,cancelDialogAction:function(){p(!1),null!=E&&E.current&&(E.current.scrollTop=n)},confirmDialogAction:function(){p(!1),null!=E&&E.current&&(E.current.scrollTop=n),o.inResponseToMediaResource&&g(o.inResponseToMediaResource.mediumQuote),f(!v)}}))};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(){var e=A()(["\n  mutation HidePostResponseOnParentMutation($parentPostId: ID!, $postResponseId: ID!) {\n    hidePostResponseOnParentPost(parentPostId: $parentPostId, postResponseId: $postResponseId)\n  }\n"]);return te=function(){return e},e}var ne=(0,M.Ps)(te()),oe=function(e){var t,n,o,i=e.responseToBeHidden,a=e.parentPost,l=e.hidePopoverMenu,u=(0,c.Hk)().value,p=(0,P.I0)(),d=(0,T.Av)(),f=(0,v.pK)(),g=s.useContext(L.H).inResponseToPostId,h=s.useContext(N.D).responseSortType,E=g,b=(null==u?void 0:u.id)===(null===(t=a.creator)||void 0===t?void 0:t.id),R=null==a||null===(n=a.collection)||void 0===n?void 0:n.viewerEdge.isEditor,x=(null==u?void 0:u.id)===(null===(o=i.creator)||void 0===o?void 0:o.id),S=(0,y.useMutation)(ne,{variables:{postResponseId:i.id,parentPostId:E},update:function(e){var t,n=e.readFragment({id:"Post:".concat(g),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:h}});null!==(t=F(n,i.id))&&(e.writeFragment({id:"Post:".concat(g),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:ee({},t),variables:{sortType:h}}),d.event("response.hidden",{postId:i.id,source:f}),p((0,D.Dx)({message:"",toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:i.id,parentPostId:E}})),l())}}),I=r()(S,1)[0];return x?null:b||R?s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:I},"Hide this response")):null},re=n(33241),se=n(62181),ie=n(90639),ae=function(e){var t,n=e.response,o=e.parentPost,i=e.hidePopoverMenu,a=(0,c.Hk)().value,l=(0,T.Av)(),u=(0,v.pK)(),p=s.useState(!1),d=r()(p,2),f=d[0],g=d[1],h=function(e){var t,n,o=e.response,i=o.id,a=null===(t=o.creator)||void 0===t?void 0:t.id,l=null===(n=o.creator)||void 0===n?void 0:n.viewerEdge.isBlocking,u=(0,P.I0)(),c=(0,y.useMutation)(re.g,{variables:{targetPostId:i,targetAuthorId:a,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){u((0,D.Dx)({message:"Successfully reported post."}))}}),p=r()(c,2),d=p[0],m=p[1];return{reportStory:s.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,o=e.reportReason;return d({variables:{targetPostId:i,targetAuthorId:a,alsoBlockAuthor:n,reason:void 0===o?"Spam":o},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:a,viewerEdge:{id:"userId:".concat(a,"-viewerId:optimistic"),isBlocking:l||n}}}})}),[o,d]),error:null==m?void 0:m.error,loading:null==m?void 0:m.loading}}({response:n}).reportStory,E=(null==a?void 0:a.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);return!n.creator||E?null:s.createElement(s.Fragment,null,s.createElement(O.Sl,null,null!=a&&a.id?s.createElement(m.rU,{onClick:function(){return g(!0)}},"Report this response"):s.createElement(se.R9,{operation:"register",post:o,susiEntry:"respond_sidebar"},"Report this response")),s.createElement(ie.$,{onSubmit:function(e,t){return l.event("response.flagged",{postId:n.id,reason:t,source:u}),h({alsoBlockAuthor:e,reportReason:t})},isVisible:f,hide:function(){g(!1),i()},isResponse:!0}))},le=n(965),ue=n(65347),ce=n(55573),pe=function(e){var t=e.response,n=e.hidePopoverMenu,o=(0,le.CP)(),r=(0,T.Av)(),i=(0,c.Hk)().value,a=(0,v.pK)(),l=(0,g.b$)((function(e){return e.multiVote.clapsPerPost})),u=(0,P.I0)(),p=s.useCallback((function(e){return u((0,ue.at)(e))}),[u]),d=(0,ce.l)(l,t),f=d.clapCount,h=d.viewerClapCount;return null!=i&&i.id&&0!==f&&0!==h?s.createElement(O.Sl,null,s.createElement(m.rU,{onClick:function(){o(t,(null==i?void 0:i.id)||"",-h),p({postId:t.id,clapCount:f-h,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),r.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:h,source:a}),n()}},"Undo applause for this response")):null},de=n(26912),me=n(6688),fe={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},ve=function(e){var t=e.response,n=e.responseType,o=e.parentPost,r=e.isPopoverMenuVisible,i=e.hidePopoverMenu,a=(0,me.I)(),l=t.creator,u=s.useRef(null);return s.useEffect((function(){var e=function(e){var t;null!=u&&null!==(t=u.current)&&void 0!==t&&t.contains(e.target)||i()};if(r)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),t&&l?s.createElement("div",{className:a(fe),ref:u},s.createElement(O.mX,null,s.createElement(ae,{response:t,parentPost:o,hidePopoverMenu:i}),s.createElement(oe,{responseToBeHidden:t,parentPost:o,hidePopoverMenu:i}),s.createElement(k,{response:t,parentPost:o,hidePopoverMenu:i}),n===de.Q.SIMPLE&&s.createElement(pe,{response:t,hidePopoverMenu:i}),n===de.Q.SIMPLE&&s.createElement(Z,{response:t}),s.createElement(G,{response:t,hidePopoverMenu:i}))):null},ge=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},he=function(e){var t,n=e.response,o=e.responseType,b=e.parentPost,R=(0,c.Hk)().value,y=(0,a.Iq)(),P=(0,a.Fg)(),x=n.creator,S=n.mediumUrl,O=n.createdAt,I=s.useState(!1),T=r()(I,2),D=T[0],w=T[1],C=(0,g.v9)((function(e){return e.config.authDomain}));if(!n||!x||!S)return null;var k=(null===(t=b.creator)||void 0===t?void 0:t.id)===x.id,j=(null==R?void 0:R.id)===x.id,_=function(e,t){return e&&t===de.Q.SIMPLE}(n,o)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt),A=s.createElement(m.rU,{href:(0,E.AWr)(x,C)},s.createElement(f.F,{scale:"M",color:"DARKER"},x.name));return s.createElement(s.Fragment,null,s.createElement(m.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between"},s.createElement(m.xu,{display:"flex",flexDirection:"row",alignItems:"center"},s.createElement(p.Yt,{scale:"XS",user:x}),s.createElement(m.xu,{paddingLeft:"12px"},s.createElement(m.xu,{display:"flex",flexDirection:"row"},s.createElement(u.bZ,{name:"enable_author_cards_byline",placeholder:function(){return A}},(function(e){return e?s.createElement(m.$W,{placement:"top",targetDistance:15,mouseLeaveDelay:200,popoverRenderFn:function(){return s.createElement(d.K$,{user:x})}},s.createElement(m.rU,{href:(0,E.AWr)(x,C)},s.createElement(f.F,{scale:"M",color:"DARKER"},x.name))):A})),k?s.createElement(l,{title:"AUTHOR",backgroundColor:P.brandColor.sage.dark}):j?s.createElement(l,{title:"YOU",backgroundColor:"#A8A8A8"}):null),s.createElement(m.rU,{href:S,linkStyle:"SUBTLE",inline:!0,noFollow:!0},s.createElement(f.F,{scale:"M"},s.createElement(i.b,{timestamp:O}),_&&s.createElement(s.Fragment,null," (edited)"))))),s.createElement(m.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),w(!D)},inline:!0,className:y(ge)},s.createElement(h.Z,null))),D&&s.createElement("div",{className:y({position:"relative"})},s.createElement(v.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},s.createElement(ve,{response:n,responseType:o,parentPost:b,isPopoverMenuVisible:D,hidePopoverMenu:function(){return w(!1)}}))))}},13787:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var o=n(28655),r=n.n(o),s=n(71439),i=n(98281);function a(){var e=r()(["\n  fragment ResponseHeader_post on Post {\n    createdAt\n    creator {\n      ...UserAvatar_user\n      viewerEdge {\n        id\n        isBlocking\n      }\n    }\n    mediumUrl\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,s.Ps)(a(),i.WQ)},51151:(e,t,n)=>{"use strict";n.d(t,{J:()=>h,u:()=>E});var o=n(28655),r=n.n(o),s=n(59713),i=n.n(s),a=n(71439),l=n(67294),u=n(19692),c=n(28309),p=n(14391),d=n(58357),m=n(83024);function f(){var e=r()(["\n  fragment ResponseQuote_post on Post {\n    inResponseToMediaResource {\n      href\n      mediumQuote {\n        quoteId\n        startOffset\n        endOffset\n        paragraphs {\n          ...TextParagraph_paragraph\n        }\n        ...buildQuotePreviewParagraph_quote\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.inResponseToMediaResource,n=(0,c.Iq)(),o=(0,c.Fg)(),r=(0,d.r)((function(){var e=null==t?void 0:t.href;if(e){var n=null==e?void 0:e.split("#")[1];if(n){var o=n.split("--")[0];if(o){var r=document.getElementById(o);if(r){var s=(null==r?void 0:r.offsetTop)-100;s&&window.scrollTo({top:s,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]),s=null==t?void 0:t.mediumQuote;if(!s)return null;var i=(0,m.eu)(s);if(!i||!i.type)return null;var a=i.type;return a===p.NJ.IMG||a===p.NJ.IFRAME||a===p.NJ.COVER_TITLE||a===p.NJ.HR||a===p.NJ.MIXTAPE_EMBED||a===p.NJ.SECTION_CAPTION?null:l.createElement("div",{onClick:r,onKeyDown:r,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:o.backgroundColor})},l.createElement(u.Do,{paragraph:g(g({},i),{},{name:"embedded-quote-".concat(s.quoteId,"-").concat(i.name)}),paragraphStyle:a,spaceTop:4,richTextStyle:"STREAM"}))},E=(0,a.Ps)(f(),m.Sz,u.Rg)},2074:(e,t,n)=>{"use strict";n.d(t,{A:()=>R,g:()=>b});var o=n(28655),r=n.n(o),s=n(71439),i=n(8011),a=n(43522),l=n(41832),u=n(15699),c=n(27952),p=n(13787),d=n(51151);function m(){var e=r()(["\n  fragment StoryResponse_storyResponse on StreamItemPostStoryResponse {\n    post {\n      ...ResponseHeader_post\n      ...ResponseQuote_post\n      id\n      responsesCount\n      creator {\n        viewerEdge {\n          id\n          isBlocking\n        }\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      responseDistribution\n      ...PostPresentationTracker_post\n      previewContent {\n        bodyModel {\n          paragraphs {\n            text\n            type\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var f=(0,s.Ps)(m(),p.F,u.h,d.u,c.$mN,l.OJ),v=n(58992),g=n(31078);function h(){var e=r()(["\n  query PagedThreadedPostResponsesQuery(\n    $postId: ID!\n    $postResponsesPaging: PagingOptions\n    $sortType: ResponseSortType\n  ) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      responsesCount\n      postResponses {\n        count\n      }\n      responseRootPost {\n        post {\n          id\n        }\n        responseDepth\n      }\n      threadedPostResponses(paging: $postResponsesPaging, sortType: $sortType) {\n        __typename\n        autoExpandedPostIds\n        pagingInfo {\n          next {\n            limit\n            to\n          }\n        }\n        posts {\n          ... on Post {\n            ...StoryResponse_threadedStoryResponse_post\n            ...SimpleResponse_threadedSimpleResponse_post\n            ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function E(){var e=r()(['\n  query PostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      postResponses {\n        count\n        responsesConnection(paging: $postResponsesPaging) @connection(key: "responsesConnection") {\n          pagingInfo {\n            next {\n              limit\n              to\n            }\n          }\n          stream {\n            itemType {\n              __typename\n              ... on StreamItemPostStoryResponse {\n                ...StoryResponse_storyResponse\n              }\n              ... on StreamItemPostSimpleResponse {\n                ...SimpleResponse_simpleResponse\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"]);return E=function(){return e},e}var b=(0,s.Ps)(E(),g.Z,f,i.y),R=(0,s.Ps)(h(),g.Z,a.D,v.t,a.K)},72558:(e,t,n)=>{"use strict";n.d(t,{OT:()=>A,sG:()=>j});var o=n(63038),r=n.n(o),s=n(67294),i=n(2277),a=n(24745),l=n(51151),u=n(14267),c=n(39382),p=n(59713),d=n.n(p),m=n(99046),f=n(54260),v=n(74810),g=n(53976),h=n(7530),E=n(64504),b=n(62630),R=n(27572),y=n(28309);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var x=s.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const S=function(e){return s.createElement("svg",P({width:29,height:29},e),x)};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.response,n=t.postResponses,o=t.id,r=(null==n?void 0:n.count)||0,i=s.useContext(f.H),a=i.inResponseToPostId,l=i.isThreadedResponsesVisible,c=i.toggleThreadedResponses,p=i.threadDepthOnPage,d=i.toggleCreateReply,P=i.loadThreadedResponses,x=i.isThreadedResponsesQueryCalled,O=i.showContinueThisThreadSidebar,T=i.threadDepthFromRootPost,D=s.useContext(u.D).rootPostId,w=(0,b.Av)(),C=(0,R.pK)(),k=(0,y.Iq)(),j=function(e){return function(t){return{fill:e?t.accentColor.fill.normal:t.baseColor.fill.normal,height:"25px",width:"25px"}}},_=!!(0,g.V)({name:"enable_lite_continue_this_thread",placeholder:!1}),A=p>=v.y,M=A&&r>0,N=function(e,t){return s.createElement(h.xu,{display:"flex",alignItems:"center"},s.createElement(S,{className:k(j(M)),"aria-label":"responses"}),s.createElement(h.xu,{tag:"div",marginLeft:"8px",marginTop:"2px"},s.createElement(E.F,{color:e,tag:"p",scale:"M"},t)))},B={postId:o,parentPostId:a,rootPostId:D,threadDepth:T,source:C},L=t.mediumUrl?s.createElement(h.rU,{linkStyle:"SUBTLE",href:t.mediumUrl},N("ACCENT","Continue this thread")):null,U=function(){O(),w.event("response.continue",I({},B))},H=_?s.createElement(h.rU,{linkStyle:"SUBTLE",onClick:U},N("ACCENT","Continue this thread")):L;return s.createElement(h.xu,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},s.createElement(h.xu,{display:"flex",alignItems:"center"},s.createElement(m.S,{buttonStyle:"SUBTLE_THREADED_RESPONSE",post:t,shouldShowResponsiveLabelText:!0,susiEntry:"respond_sidebar"}),s.createElement(h.xu,{marginLeft:"12px",display:"flex",alignItems:"center",height:"25px"},M?H:r>0&&s.createElement(h.rU,{linkStyle:"SUBTLE",onClick:function(){!function(e){e?w.event("response.collapsed",I({},B)):e||w.event("response.expanded",I({},B))}(l),c()}},N("DARKER",function(e,t){return t?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")}(r,l))))),!M&&s.createElement(h.xu,{paddingRight:"6px"},s.createElement(E.F,{color:"DARKER",scale:"M"},s.createElement(h.rU,{onClick:function(){A?U():(x||P(),d())},inline:!0},"Reply"))))},D=n(26912),w=n(72955),C=n(15699),k=n(29035),j=function(e){return e.join("").length>320?"char":e.join("\n").split("\n").length>c._W?"line":"none"},_=function(){return{border:"none",padding:"0 0 5px",cursor:"pointer"}},A=function(e){var t,n=e.simpleResponse,o=e.parentPost,p=e.omitBottomBorder,d=n.creator,m=n.content,f=n.mediumUrl,v=s.useState(!1),g=r()(v,2),b=g[0],R=g[1],P=s.useRef(null),x=(0,y.Iq)(),S=s.useContext(u.D).sidebarRef;(0,w.Vj)(P,n,S);var O=null==m||null===(t=m.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(d&&m&&O&&f))return null;var I=O.map((function(e){return e.text||""})),A=j(I),M="none"!==A,N=M&&!b,B=(0,k.ic)(navigator&&navigator.userAgent);return s.createElement(C.o,{post:n,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!M},s.createElement(h.xu,{paddingTop:"25px",paddingBottom:B&&p?"48px":"16px",borderBottom:p?void 0:"BASE_LIGHTER",ref:P},s.createElement(a.E,{response:n,responseType:D.Q.SIMPLE,parentPost:o}),s.createElement(l.J,{inResponseToMediaResource:n.inResponseToMediaResource}),s.createElement(h.xu,{marginTop:"5px"},s.createElement(i.c.Provider,{value:!0},s.createElement(c.YN,{paragraphs:O,truncateStrategy:A,isExpanded:b}))),N&&s.createElement("button",{onClick:function(){return R(!0)},className:x(_)},s.createElement(E.F,{scale:"S",color:"ACCENT",tag:"span"},"Read More")),s.createElement(T,{response:n})))}},39382:(e,t,n)=>{"use strict";n.d(t,{_W:()=>f,YN:()=>g});var o=n(59713),r=n.n(o),s=n(67294),i=n(3011),a=n(7530),l=n(64504),u=n(28309),c=n(14391),p=n(50993);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=5;function v(e,t,n){return"char"===e&&t>250||"line"===e&&n>f}function g(e){var t=e.paragraphs,n=e.truncateStrategy,o=e.isExpanded,r=(0,u.Iq)(),d=0,f=0,g="none"!==n&&!o;return s.createElement("pre",{className:r({whiteSpace:"pre-wrap"})},t.map((function(e){if(!o&&v(n,d,f))return null;var t=(null==e?void 0:e.text)||"";d+=t.length||0,f+=t.split("\n").length||0;var u=m(m({},e),{},{dropCapImage:null,hasDropCap:null}),h=!o&&v(n,d,f);if(h&&"char"===n){var E=250-(d-t.length||0);u.markups=u.markups.reduce((function(e,t){if(t.start<E){var n=m({},t);n.end>E&&(n.end=E),e.push(n)}return e}),[]),u.text=(0,p.N8)(t,E)}return s.createElement(a.xu,{padding:"5px 0px",key:e.name||e.id},s.createElement(l.F,{scale:"M",color:"DARKER",tag:"div"},s.createElement("div",{className:r({lineHeight:"24px"})},s.createElement(i.T2,{paragraph:u,richTextStyle:"FULL_PAGE",paragraphStyle:c.NJ.P}),g&&h&&"...")))})).filter((function(e){return!!e})))}},8011:(e,t,n)=>{"use strict";n.d(t,{y:()=>d});var o=n(28655),r=n.n(o),s=n(71439),i=n(5399),a=n(51151),l=n(41832),u=n(72955),c=n(27952);function p(){var e=r()(["\n  fragment SimpleResponse_simpleResponse on StreamItemPostSimpleResponse {\n    post {\n      id\n      createdAt\n      firstPublishedAt\n      latestPublishedAt\n      title\n      creator {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        viewerEdge {\n          isBlocking\n        }\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      viewerEdge {\n        id\n        clapCount\n      }\n      isPublished\n      voterCount\n      responsesCount\n      allowResponses\n      latestRev\n      recommenders {\n        id\n        name\n      }\n      mediumUrl\n      content {\n        bodyModel {\n          paragraphs {\n            text\n          }\n          ...getSlateBodyFromPostBodyModel_bodyModel\n        }\n      }\n      collection {\n        id\n        slug\n      }\n      isLimitedState\n      responseDistribution\n      ...PostPresentationTracker_post\n      ...PostScrollTracker_post\n      ...ResponseQuote_post\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,s.Ps)(p(),u.h_,u.kH,a.u,i.I,c.$mN,l.OJ)},43522:(e,t,n)=>{"use strict";n.d(t,{D:()=>f,K:()=>v});var o=n(28655),r=n.n(o),s=n(71439),i=n(5399),a=n(51151),l=n(58992),u=n(41832),c=n(72955),p=n(27952);function d(){var e=r()(["\n  fragment SimpleResponse_threadedSimpleResponse_defaultPostResponses on Post {\n    responsesCount\n    postResponses {\n      count\n    }\n    threadedPostResponses(paging: {limit: 10}, sortType: $sortType) {\n      __typename\n      autoExpandedPostIds\n      pagingInfo {\n        next {\n          limit\n          to\n        }\n      }\n      posts {\n        ... on Post {\n          ...StoryResponse_threadedStoryResponse_post\n          ...SimpleResponse_threadedSimpleResponse_post\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function m(){var e=r()(["\n  fragment SimpleResponse_threadedSimpleResponse_post on Post {\n    id\n    createdAt\n    firstPublishedAt\n    latestPublishedAt\n    title\n    creator {\n      id\n      name\n      username\n      imageId\n      mediumMemberAt\n      viewerEdge {\n        id\n        isBlocking\n      }\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n    viewerEdge {\n      id\n      clapCount\n    }\n    isPublished\n    voterCount\n    responsesCount\n    postResponses {\n      count\n    }\n    allowResponses\n    latestRev\n    recommenders {\n      id\n      name\n    }\n    mediumUrl\n    content {\n      bodyModel {\n        paragraphs {\n          text\n        }\n        ...getSlateBodyFromPostBodyModel_bodyModel\n      }\n    }\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    inResponseToType\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...PostScrollTracker_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var f=(0,s.Ps)(m(),c.h_,c.kH,a.u,i.I,p.$mN,u.OJ),v=(0,s.Ps)(d(),l.t,f)},58992:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var o=n(28655),r=n.n(o),s=n(71439),i=n(41832),a=n(15699),l=n(27952),u=n(13787),c=n(51151);function p(){var e=r()(["\n  fragment StoryResponse_threadedStoryResponse_post on Post {\n    id\n    responsesCount\n    postResponses {\n      count\n    }\n    creator {\n      viewerEdge {\n        id\n        isBlocking\n      }\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n\n    previewContent {\n      bodyModel {\n        paragraphs {\n          text\n          type\n        }\n      }\n    }\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...ResponseHeader_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,s.Ps)(p(),u.F,a.h,c.u,l.$mN,i.OJ)},54260:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var o=n(67294).createContext({inResponseToPostId:"",isThreadedResponsesVisible:!1,toggleThreadedResponses:function(){},showThreadedResponses:function(){},threadDepthFromRootPost:0,threadDepthOnPage:0,hideCreateReply:function(){},toggleCreateReply:function(){},loadThreadedResponses:function(){},isThreadedResponsesQueryCalled:!1,isThreadedResponsesQueryLoading:!1,showContinueThisThreadSidebar:function(){}})},9471:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var o=n(87757),r=n.n(o),s=n(48926),i=n.n(s),a=n(67294),l=n(12291),u=n(59116),c=n(78067),p=n(14267),d=n(54260),m=n(30049),f=n(319),v=n.n(f),g=n(59713),h=n.n(g),E=n(28655),b=n.n(E),R=n(71439),y=n(80439),P=n(43522),x=n(58992);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(){var e=b()(["\n  mutation publishPostThreadedResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n    $responseDistribution: ResponseDistributionType\n    $sortType: ResponseSortType\n  ) {\n    publishPostThreadedResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n      responseDistribution: $responseDistribution\n    ) {\n      id\n      ... on Post {\n        ...StoryResponse_threadedStoryResponse_post\n        ...SimpleResponse_threadedSimpleResponse_post\n        ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}var T=(0,R.Ps)(I(),P.D,x.t,P.K),D=function(e){var t=e.children,n=e.parentPostId,o=a.useContext(p.D).responseSortType;return a.createElement(y.mm,{mutation:T,update:function(e,t){var r=function(e,t){if(!t||!e.data)return null;var n=e.data.publishPostThreadedResponse;return O(O({},t),{},{postResponses:{count:t.postResponses.count+1},threadedPostResponses:O(O({},t.threadedPostResponses),{},{posts:[n].concat(v()(t.threadedPostResponses.posts))})})}(t,e.readFragment({id:"Post:".concat(n),fragment:P.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:o}}));null!==r&&e.writeFragment({id:"Post:".concat(n),fragment:P.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:o},data:O({},r)})}},(function(e,n){return t({publishResponse:e,loading:n.loading,error:n.error})}))};function w(){var e=b()(["\n  mutation savePostResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n  ) {\n    savePostResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n    ) {\n      ... on Post {\n        id\n      }\n    }\n  }\n"]);return w=function(){return e},e}var C=(0,R.Ps)(w()),k=function(e){var t=e.children;return a.createElement(y.mm,{mutation:C},(function(e){return t({saveResponse:e})}))},j=n(19537),_=n(18608),A=n(64504),M=n(62630),N=n(27572),B=n(28309),L=n(14391),U=n(85277),H=function(e){var t=e.parentPostId,n=e.placeholder,o=e.hideReplyEditing,s=void 0===o?function(){}:o,f=e.editorOpenByDefault,v=void 0===f||f,g=e.showEditorHeader,h=void 0===g||g,E=a.useContext(p.D),b=E.setIsSavingResponse,R=E.responsesLocked,y=E.inResponseToQuote,P=E.setInResponseToQuote,x=E.responseDistribution,S=E.setResponseDistribution,O=E.responseSortType,I=E.rootPostId,T=a.useContext(d.H),w=T.showThreadedResponses,C=T.isThreadedResponsesQueryLoading,H=T.threadDepthFromRootPost,F=function(){x===L.Et.DISTRIBUTED?S(L.Et.NOT_DISTRIBUTED):S(L.Et.DISTRIBUTED)},Q=(0,N.pK)(),V=(0,M.Av)(),$=(0,l.I0)(),K=(0,B.Iq)(),q=a.useRef(null);a.useEffect((function(){var e;null!=q&&null!==(e=q.current)&&void 0!==e&&e.getBoundingClientRect&&q.current.getBoundingClientRect().bottom>window.innerHeight&&q.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var z=function(e){return function(){var n=i()(r().mark((function n(o,s){var i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({variables:{inResponseToPostId:t,deltas:o,inResponseToQuoteId:null==y?void 0:y.id}});case 2:i=n.sent,s(i.data.savePostResponse.id);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()};return a.createElement(D,{parentPostId:t},(function(e){var o=e.publishResponse,l=e.loading,p=e.error;return(0,u._M)(p)||R?(b(!1),a.createElement(m.R,{message:_.x})):a.createElement(k,null,(function(e){var p,d=e.saveResponse;return a.createElement("div",{ref:q},a.createElement(A.F,{scale:"M",color:"DARKER",tag:"div"},a.createElement("div",{className:K({lineHeight:"24px"})},a.createElement(_.j,{postId:t,isPublishingResponse:l,publishResponse:(p=o,function(e,n){return b(!0),p({variables:{inResponseToPostId:t,deltas:e,inResponseToQuoteId:null==y?void 0:y.id,responseDistribution:x,responseSortType:O}}).then((function(e){var o=e.data&&e.data.publishPostThreadedResponse,r=(0,u.ed)(e.errors);if(o)return V.event("inlineEditor.publish",{postId:t,context:c.r.INLINE_POST_RESPONSE,source:Q}),V.event("response.created",{postId:o.id,parentPostId:t,rootPostId:I,threadDepth:H+1,context:c.r.INLINE_POST_RESPONSE,source:Q}),o.responseDistribution===L.Et.DISTRIBUTED&&V.event("response.distributed",{postId:o.id,parentPostId:t,rootPostId:I,threadDepth:H+1,context:c.r.INLINE_POST_RESPONSE,source:Q}),b(!1),w(),x===L.Et.DISTRIBUTED&&($((0,U.Dx)({message:"",toastStyle:"PUBLISH_RESPONSE",extraParams:{response:o},duration:5e3})),S(L.Et.NOT_DISTRIBUTED)),n();r&&(b(!1),$((0,U.Dx)({message:"You’ve reached the limit for stories that can be published in one day. Please try again tomorrow.",toastStyle:"ERROR"})))}))}),saveResponse:z(d),type:j.H.create,inResponseToQuote:y,onClose:i()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(void 0),s(),e.abrupt("return",{});case 3:case"end":return e.stop()}}),e)}))),editorOpenByDefault:v,placeholder:n,showEditorHeader:h,disableReplyButton:C,showPublishCheckbox:!v,responseDistribution:x,toggleResponseDistribution:F}))))}))}))}},30049:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var o=n(67294),r=n(7530),s=n(64504),i=n(27952),a=function(e){var t=e.message||"The author has closed discussion for this story.";return o.createElement(r.xu,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px"},o.createElement(s.F,{scale:"M",tag:"span",color:"DARKER"},t," ",o.createElement(r.rU,{href:(0,i.VGH)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},19537:(e,t,n)=>{"use strict";var o;n.d(t,{H:()=>o}),function(e){e.edit="EDIT",e.create="CREATE"}(o||(o={}))},18608:(e,t,n)=>{"use strict";n.d(t,{x:()=>J,j:()=>oe});var o=n(63038),r=n.n(o),s=n(87757),i=n.n(s),a=n(48926),l=n.n(a),u=n(59713),c=n.n(u),p=n(67294),d=n(84792),m=n(10143),f=n(26600),v=n(25772),g=n(78067),h=n(22470),E=n(54803),b=n(9735),R=n(24548),y=n(42963),P=n(32262),x=n(7530),S=n(28309),O=n(74465),I=n(93394),T=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}},D=function(e){var t=e.isEdit,n=e.saveResponse,o=e.setDraftResponseId,r=(0,S.Iq)(),s="editorPopoverMenu";return p.createElement(x.Bn,null,(function(e){var i=e.isVisible,a=e.toggle,l=e.hide;return p.createElement(x.J2,{ariaId:s,isVisible:i,hide:l,customZIndex:O.ZP.responseSidebarPopover,noArrow:!0,placement:"bottom-end",popoverRenderFn:function(){return p.createElement(P.mX,null,p.createElement(P.Sl,null,p.createElement(x.rU,{onClick:t&&o?o:n,"data-testid":"saveResponseMenuItem"},"Make this response a story")))}},p.createElement(x.rU,{ariaControls:s,ariaExpanded:i?"true":"false",onClick:a,className:r(T),"data-testid":"editorMenu"},p.createElement(I.Z,null)))}))},w=n(19692),C=n(14391),k=n(83024),j=function(e){var t=e.quote,n=(0,S.Iq)();if(!t)return null;var o=(0,k.eu)(t);return o?p.createElement("div",{className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},p.createElement(w.Do,{paragraph:o,paragraphStyle:C.NJ.P,spaceTop:4,richTextStyle:"STREAM"})):null},_=function(e){var t=e.onFocus,n=e.responseContent,o=e.setResponseContent,r=e.setIsEmpty,s=e.isEditorOpen,i=(0,S.Iq)();return p.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;r(!t),o(t)},onFocus:t,className:i({width:"100%",padding:"14px",resize:"none",minHeight:s?"100px":"0",height:s?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},A=n(19537),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,o=[],r=e.split("\n");return n&&(o=[{type:8,index:0,section:{name:N(),startIndex:0}}]),r.forEach((function(e,t){o.push({type:1,paragraph:{markups:[],name:N(),text:e,type:1},verifySameName:!1,index:t})})),o},N=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},B=n(34675),L=n(62181),U=n(98281),H=n(42933),F=n(36544),Q=function(e){var t=e.isVisible,n=e.hide,o=(0,B.Hk)().value;return p.createElement(F.C,null,(function(e){var r=e.mutate;return p.createElement(x.QH,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){r()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==o?void 0:o.unverifiedEmail,".")}))},V=n(64504),$=n(62630),K=n(27572),q=n(67297),z=n(27952),W=n(29035);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J="The author has closed discussion for this story. We are unable to save changes to your response.",Z=function(){return{"& button":{border:"none"}}},X="400ms",ee="300ms",te=function(e,t){var n=Y(Y({},t),{},{display:"flex",padding:"0 14px"});return Y(Y({},n),{},e?{transition:"opacity ".concat(X,", max-height ").concat(X),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(X,", max-height ").concat(X),opacity:0,maxHeight:0})},ne=function(e){return e?{transition:"min-height ".concat(X),minHeight:"100px"}:{transition:"min-height ".concat(X),minHeight:"15px"}},oe=function(e){var t,n=e.postId,o=e.responseId,s=e.createdAt,a=e.isPublishingResponse,u=e.disableReplyButton,c=void 0!==u&&u,P=e.publishResponse,O=e.saveResponse,I=void 0===O?function(){return Promise.resolve()}:O,T=e.type,w=void 0===T?A.H.create:T,k=e.onClose,N=void 0===k?l()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):k,F=e.inResponseToQuote,G=e.initialValue,J=e.placeholder,oe=void 0===J?"What are your thoughts?":J,re=e.editorOpenByDefault,se=void 0!==re&&re,ie=e.showEditorHeader,ae=void 0===ie||ie,le=e.showPublishCheckbox,ue=void 0!==le&&le,ce=e.responseDistribution,pe=void 0===ce?C.Et.NOT_DISTRIBUTED:ce,de=e.toggleResponseDistribution,me=void 0===de?function(){}:de,fe=w===A.H.edit,ve=(0,S.Iq)(),ge=(0,$.Av)(),he=(0,K.pK)(),Ee=(0,W.rO)(navigator.userAgent),be=w===A.H.edit,Re=(0,f.c)().value,ye=(0,b.Vz)([b.Fm]),Pe=ye.editor,xe=ye.renderLeaf,Se=ye.renderElement,Oe=p.useState(fe||se),Ie=r()(Oe,2),Te=Ie[0],De=Ie[1],we=p.useState(!0),Ce=r()(we,2),ke=Ce[0],je=Ce[1],_e=p.useState((t=G)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),Ae=r()(_e,2),Me=Ae[0],Ne=Ae[1],Be=p.useState(void 0),Le=r()(Be,2),Ue=Le[0],He=Le[1],Fe=p.useState(!1),Qe=r()(Fe,2),Ve=Qe[0],$e=Qe[1],Ke=p.useCallback((function(){return $e(!1)}),[]),qe=(0,q.v9)((function(e){return e.config.authDomain})),ze=(0,B.Hk)().value,We=p.useCallback((function(){N().then((function(e){e.preventStateUpdate||(De(!1),Ee?Ne(""):(0,E.oe)(Pe))}))}),[De]);if(p.useEffect((function(){F&&De(!0)}),[F]),p.useEffect((function(){je(d.Node.string(Pe).toString().trim().length<=0)}),[Re]),p.useEffect((function(){Te&&!Ee&&(se||be||m.F3.blur(Pe),setTimeout((function(){return m.F3.focus(Pe)}),0))}),[Te]),Ue)return ge.event("inlineEditor.expand",{postId:n,context:g.r.INLINE_POST_RESPONSE,source:he}),p.createElement(y.l,{to:(0,z.d0A)(qe,Ue)});var Ge,Ye,Je=p.createElement(p.Fragment,null,!ue&&p.createElement("div",{className:ve(Z)},p.createElement(x.zx,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return We()}},"Cancel")),p.createElement(x.zx,{buttonStyle:"STRONG",size:"SMALL",disabled:ke||a||d.Node.string(Pe)===Me||c,onClick:function(){var e=Ee?M(Me,fe?{includeInitialDeltas:!1}:void 0):(0,E.wB)(Pe,fe?{includeInitialDeltas:!1}:void 0);null!=ze&&ze.unverifiedEmail?$e(!0):P(e,We)}},fe?"Update":"Respond"));return p.createElement(H.x,{marginBottom:se?"0":"20px",padding:fe?"0":"0 24px",paddingTop:se?"0":"20px"},p.createElement("div",{className:ve({backgroundColor:"white",boxShadow:"0px 2px 8px rgba(0,0,0,0.12)",borderRadius:"4px",display:"flex",flexDirection:"column",paddingTop:Te?"14px":"0",paddingBottom:Te?"14px":"0",transition:"padding-top ".concat(X,", padding-bottom ").concat(X)})},ze&&ae&&p.createElement("div",{className:ve((Ge=Te,Ye={display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"0 14px"},Y(Y({},Ye),{},Ge?{transition:"opacity ".concat(X,", max-height ").concat(X,", margin-bottom ").concat(X),opacity:1,maxHeight:"100px",marginBottom:"6px"}:{transition:"opacity ".concat(ee,", max-height ").concat(ee,", margin-bottom ").concat(ee),opacity:0,maxHeight:0,marginBottom:"0"})))},p.createElement(H.x,{display:"flex",alignItems:"center"},p.createElement(U.Yt,{scale:"XS",user:ze}),p.createElement(H.x,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},p.createElement(V.F,{scale:"M",color:"DARKER"},ze.name),fe&&s&&p.createElement(V.F,{scale:"M",color:"LIGHTER"},p.createElement(R.b,{timestamp:s})))),Te&&!ue&&p.createElement(H.x,{display:"flex",justifyContent:"flex-end"},p.createElement(D,{isEdit:fe,setDraftResponseId:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return He(o)})),saveResponse:function(){var e=Ee?M(Me):(0,E.wB)(Pe);return I(e,He)}}))),Te&&p.createElement(j,{quote:F}),p.createElement(H.x,{display:"flex",flexDirection:"column"},ze?p.createElement("div",{className:ve(ne(Te))},Ee?p.createElement(_,{onFocus:function(){return De(!0)},responseContent:Me,setIsEmpty:je,setResponseContent:Ne,isEditorOpen:Te}):p.createElement(H.x,{padding:"14px"},p.createElement(h.c,{editor:Pe},p.createElement(v.O,{onFocus:function(){return De(!0)},renderLeaf:xe,renderElement:Se,placeholder:oe})))):p.createElement(L.R9,{operation:"register",susiEntry:"respond_sidebar"},p.createElement(H.x,{padding:"14px"},p.createElement(V.F,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),ue?p.createElement("div",{className:ve(te(Te,{justifyContent:"space-between"}))},p.createElement(x.XZ,{onChange:me,checked:pe===C.Et.DISTRIBUTED,textColor:"LIGHTER",textScale:"S",checkboxStyle:"OBVIOUS",marginRight:"8px"},"Also publish to my profile"),Je):p.createElement("div",{className:ve(te(Te,{alignSelf:"flex-end"}))},Je))),p.createElement(Q,{isVisible:Ve,hide:Ke}))}},31078:(e,t,n)=>{"use strict";n.d(t,{Eq:()=>T,Z:()=>w});var o=n(59713),r=n.n(o),s=n(63038),i=n.n(s),a=n(28655),l=n.n(a),u=n(71439),c=n(46829),p=n(67294),d=n(32262),m=n(7530),f=n(64504),v=n(62630),g=n(27572),h=n(28309);function E(){var e=l()(["\n  query FetchPostResponsesLockedQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function b(){var e=l()(["\n  fragment CloseDiscussion_post on Post {\n    id\n    responsesLocked\n    isLockedResponse\n  }\n"]);return b=function(){return e},e}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(){var e=l()(["\n  mutation UnlockResponsesOnPostMutation($postId: ID!) {\n    unlockResponsesOnPost(postId: $postId)\n  }\n"]);return P=function(){return e},e}function x(){var e=l()(["\n  mutation LockResponsesOnPostMutation($postId: ID!) {\n    lockResponsesOnPost(postId: $postId)\n  }\n"]);return x=function(){return e},e}var S=function(){return{fontStyle:"italic",textAlign:"center"}},O=(0,u.Ps)(x()),I=(0,u.Ps)(P()),T=function(e){var t,n=e.parentPostId,o=e.responsesLocked,r=e.hidePopoverMenu,s=(0,h.Iq)(),a=(0,v.Av)(),l=(0,g.pK)(),u=p.useState(!1),E=i()(u,2),b=E[0],R=E[1],y=(0,c.useMutation)(O,{variables:{postId:n},update:function(e){a.event("responses.locked",{postId:n,source:l}),D(e,n,!0,r)}}),P=i()(y,1)[0],x=(0,c.useMutation)(I,{variables:{postId:n},update:function(e){D(e,n,!1,r)}}),T=i()(x,1)[0];return t=!0===o?p.createElement(m.rU,{onClick:T},"Open discussion"):p.createElement(m.rU,{onClick:function(){return R(!0)}},"Close discussion"),p.createElement(p.Fragment,null,p.createElement(d.Sl,null,t),b&&p.createElement(m.Vq,{isVisible:b,hide:function(){return R(!1)},withCloseButton:!1,noPortal:!0,padding:50},p.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},p.createElement(f.X6,{scale:"M"},"Close Discussion"),p.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},p.createElement(f.F,{scale:"M",color:"DARKER"},"Closing a discussion prevents responses from being added or edited on your story. Existing responses will remain on your story.")),p.createElement(m.xu,{display:"flex",marginBottom:"20px"},p.createElement(m.rU,{onClick:function(){return R(!1)}},p.createElement(f.F,{scale:"M",color:"DARKER"},"Cancel")),p.createElement(m.xu,{marginLeft:"25px"},p.createElement(m.zx,{buttonStyle:"ERROR",onClick:P,"data-test-id":"close-discussion-button"},"Close discussion"))),p.createElement("div",{className:s(S)},p.createElement(f.F,{scale:"M"},"You can reopen the discussion at any time.")))))},D=function(e,t,n,o){var r=e.readQuery({query:C,variables:{postId:t}});r&&(e.writeQuery({query:C,data:Object.assign({},r,{post:y(y({},r.post),{},{responsesLocked:n})}),variables:{postId:t}}),o())},w=(0,u.Ps)(b()),C=(0,u.Ps)(E(),w)},26912:(e,t,n)=>{"use strict";var o;n.d(t,{Q:()=>o}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(o||(o={}))},74810:(e,t,n)=>{"use strict";n.d(t,{y:()=>qe,k:()=>ze});var o=n(319),r=n.n(o),s=n(63038),i=n.n(s),a=n(38125),l=n.n(a),u=n(67294),c=n(86156),p=n(59713),d=n.n(p),m=n(46829),f=n(2074),v=n(23450),g=n.n(v),h=n(26600),E=n(78067),b=n(51176),R=n(14267),y=n(72558),P=n(19537),x=n(68356),S=n.n(x),O=n(52383),I=n(90320);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={delay:1e3,timeout:2e4,loading:function(e){return e.error?u.createElement(O.C,{error:e.error}):e.timedOut?u.createElement(O.C,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?u.createElement(I.a,null):null}},C=S()(D(D({},w),{},{loader:function(){return n.e(6635).then(n.bind(n,91229))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[91229]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return u.createElement(n,t)}})),k=function(e){var t=e.parentPostId,n=e.responseId,o=e.type,r=void 0===o?P.H.create:o,s=e.initialValue;return u.createElement(C,{parentPostId:t,responseId:n,type:r,initialValue:s})},j=n(27572),_=function(e){var t,n=e.responsePost,o=e.index,s=e.parentPost,a=e.omitBottomBorder,l=u.useState(!1),c=i()(l,2),p=c[0],d=c[1],m=u.useState(null),f=i()(m,2),v=f[0],g=f[1],h=u.useContext(R.D),E=h.editingResponsesAtIndices,x=h.setEditingResponsesAtIndices;return u.useEffect((function(){if(p&&!E.includes(o)&&x([].concat(r()(E),[o])),!p&&E.includes(o)){var e=E.filter((function(e){return e!==o}));x(e)}}),[p,E,x]),n?p?u.createElement(b.Q.Provider,{value:{isEditing:p,setIsEditing:d,latestRev:null==n?void 0:n.latestRev,createdAt:null==n?void 0:n.createdAt,setEditingQuote:g,editingQuote:v}},u.createElement(j.cW,{source:{index:o},key:n.id,extendSource:!0},u.createElement(k,{type:P.H.edit,parentPostId:s.id,responseId:n.id,initialValue:null==n||null===(t=n.content)||void 0===t?void 0:t.bodyModel}))):u.createElement(b.Q.Provider,{value:{isEditing:p,setIsEditing:d,setEditingQuote:g,editingQuote:v}},u.createElement(j.cW,{source:{index:o},key:n.id,extendSource:!0},u.createElement(y.OT,{parentPost:s,simpleResponse:n,omitBottomBorder:a}))):null},A=n(7530),M=n(28309),N={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},B=function(){var e=(0,M.om)({shimmerKeyframesName:N}).shimmerKeyframesName,t=(0,M.Iq)();return u.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},u.createElement(A.xu,{display:"flex",flexDirection:"row"},u.createElement(A.xu,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{marginLeft:"8px",marginTop:"4px"},u.createElement(A.xu,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),u.createElement(A.xu,{marginTop:"12px"},u.createElement(A.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),u.createElement(A.xu,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))},L=n(64504),U=n(15699),H=n(14391),F=n(81162),Q=n(14349),V=n(27390),$=n(27952),K=n(24745),q=n(51151),z=n(26912);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var G,Y=function(e){return{fill:e.baseColor.fill.lighter,float:"right"}},J=function(e){var t,n,o=e.storyResponse,r=e.parentPost,s=e.omitBottomBorder,i=(0,M.Iq)(),a=(0,M.Fg)(),l=o.creator,c=o.previewContent,p=o.mediumUrl,d=o.clapCount,m=o.responsesCount,f=null==c||null===(t=c.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(l&&c&&c.bodyModel&&p&&f))return null;var v=function(e){var t,n=[],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(r.text&&(n.push(r),n.length>=2))break}}catch(e){o.e(e)}finally{o.f()}return{title:n[0],subtitle:n[1]}}(f);if(!v.title&&!v.subtitle)return null;var g,h=null!==(null===(n=o.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),E=m||0;return u.createElement(U.o,{post:o,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!1},u.createElement(A.xu,{paddingTop:"25px",paddingBottom:"20px",borderBottom:s?void 0:"BASE_LIGHTER"},u.createElement(K.E,{response:o,responseType:z.Q.STORY,parentPost:r}),u.createElement(q.J,{inResponseToMediaResource:o.inResponseToMediaResource}),u.createElement(A.P3,{href:(0,$.jVf)(o)},u.createElement("div",{className:i({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:h?"12px":"16px",backgroundColor:a.backgroundColor})},u.createElement("div",{className:i(Y)},u.createElement(L.F,{scale:"S",color:"LIGHTER",tag:"div"},u.createElement(A.xu,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:d>0||E>0?"20px":"0"},d>0?u.createElement(A.xu,{display:"flex",alignItems:"center"},u.createElement(A.xu,{tag:F.Z,marginRight:"2px"}),u.createElement("div",null,(0,V.pY)(d))):null,E>0?u.createElement(A.xu,{display:"flex",alignItems:"center"},u.createElement(A.xu,{tag:Q.Z,marginLeft:d?"8px":"0",marginRight:"2px"}),u.createElement("div",null,(0,V.pY)(E))):null))),u.createElement(L.F,{scale:"M",clamp:2,color:"DARKER"},v.title&&u.createElement(A.xu,null,v.title.text),v.subtitle&&u.createElement("div",{className:i((g=v.title.type,function(e){return{color:g===H.NJ.H3?e.baseColor.text.lighter:e.baseColor.text.normal}}))},v.subtitle.text))))))},Z=n(54260),X=n(9471),ee=n(22091),te=n(62630);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.LEGACY=1]="LEGACY",e[e.STORY=2]="STORY",e[e.SIMPLE=3]="SIMPLE"}(G||(G={}));var re=function(e,t){return{marginBottom:t?"0px":"24px",marginLeft:"12px",borderLeft:"3px solid ".concat(e.baseColor.border.lighter)}},se=function(e,t){var n,o,s,i,a,l,u=null==t||null===(n=t.post)||void 0===n?void 0:n.threadedPostResponses,c=null==t?void 0:t.post,p=null==t||null===(o=t.post)||void 0===o?void 0:o.threadedPostResponses;if(!(c&&u&&u.posts&&p))return e;var d=(null==e||null===(s=e.post)||void 0===s||null===(i=s.threadedPostResponses)||void 0===i?void 0:i.posts)||[],m=(null==t||null===(a=t.post)||void 0===a||null===(l=a.threadedPostResponses)||void 0===l?void 0:l.posts)||[];return{post:oe(oe({},c),{},{threadedPostResponses:oe(oe({},p),{},{posts:[].concat(r()(d),r()(m))})})}},ie=function(e){var t=e.replies,n=e.parentPost,o=e.inResponseToPostId,s=e.threadDepthFromRootPost,i=e.threadDepthOnPage,a=void 0===i?1:i,l=e.displayBottomBorder,c=void 0!==l&&l,p=e.isShowAutoExpandedResponse,d=void 0!==p&&p,m=e.autoExpandedResponseIds,f=void 0===m?[]:m,v=(0,te.Av)(),g=(0,j.pK)(),h=u.useContext(R.D),b=h.rootPostId,y=h.isResponsesSidebarVisible,P=h.showCreateReplyEditor,x=r()((null==t?void 0:t.posts)||[]);return d&&(x=x.filter((function(e){return f.some((function(t){return t===e.id}))}))),u.useEffect((function(){d&&y&&x.forEach((function(e){v.event("response.autoExpanded",{postId:e.id,parentPostId:o,rootPostId:b,threadDepth:s,context:E.r.INLINE_POST_RESPONSE,source:g})}))}),[]),x&&0!==x.length?u.createElement(ee.xu,null,x.map((function(e,t,r){if(!e)return null;var i=t!==r.length-1||c;return u.createElement(ae,{reply:e,parentPost:n,bottomBorder:i,index:t,inResponseToPostId:o,key:e.id,threadDepthFromRootPost:s,threadDepthOnPage:a,showCreateReplyEditor:P&&0===t})}))):null},ae=function(e){var t,n,o,s,a,l,p=e.reply,d=e.parentPost,v=e.bottomBorder,b=e.index,y=e.inResponseToPostId,P=e.threadDepthOnPage,x=void 0===P?1:P,S=e.threadDepthFromRootPost,O=e.showCreateReplyEditor,I=void 0!==O&&O,T=(0,M.Iq)(),D=(0,M.Fg)(),w=(0,j.pK)(),C=(0,te.Av)(),k=null!==(t=p.threadedPostResponses)&&void 0!==t&&t.autoExpandedPostIds?r()(p.threadedPostResponses.autoExpandedPostIds):[],A=u.useState(Boolean(k.length)),N=i()(A,2),U=N[0],F=N[1],Q=u.useContext(R.D),V=Q.responsesLocked,$=Q.isLockedResponse,K=Q.inResponseToQuote,q=Q.setInResponseToQuote,z=Q.setIsSavingResponse,W=Q.sidebarRef,Y=Q.responseDistribution,ne=Q.setResponseDistribution,oe=Q.responseSortType,ae=Q.rootPostId,le=Q.isResponsesSidebarVisible,ue=u.useContext(c.f).addContinueThisThreadSidebar,ce=u.useState([]),pe=i()(ce,2),de=pe[0],me=pe[1],fe=u.useRef(null),ve=null===(n=p.creator)||void 0===n?void 0:n.name;ve&&(l="Replying to ".concat(ve));var ge=(0,m.useLazyQuery)(f.A,{variables:{postId:p.id,postResponsesPaging:{limit:10},sortType:oe},ssr:!1}),he=i()(ge,2),Ee=he[0],be=he[1],Re=be.called,ye=be.data,Pe=be.loading,xe=be.fetchMore;u.useEffect((function(){var e;null!=fe&&null!==(e=fe.current)&&void 0!==e&&e.getBoundingClientRect&&fe.current.getBoundingClientRect().bottom>window.innerHeight&&fe.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var Se=null==ye||null===(o=ye.post)||void 0===o?void 0:o.threadedPostResponses;U&&!Re&&Ee();var Oe,Ie=(null==Se?void 0:Se.posts)||[],Te=(null===(s=p.postResponses)||void 0===s?void 0:s.count)||0,De=function(e,t,n,o){var r=t.length,s=n.length;return r&&e?o-r:s?o-s:0}(U,k,Ie,Te),we=De>0,Ce=null==Se||null===(a=Se.pagingInfo)||void 0===a?void 0:a.next;return Ce&&(Oe=function(){xe&&xe({variables:{postId:p.id,postResponsesPaging:{limit:Ce.limit,to:Ce.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return se(e,n)}})}),u.createElement(ee.Bn,{initialVisibility:U},(function(e){var t=e.isVisible,n=e.toggle,o=e.show;return u.createElement(ee.Bn,{initialVisibility:I},(function(e){var r,s=e.isVisible,i=e.hide,a=e.toggle;return u.createElement(ee.xu,{borderBottom:v?"BASE_LIGHTER":"NONE",marginLeft:"24px",marginRight:x>1?"0":"24px"},u.createElement(Z.H.Provider,{value:{inResponseToPostId:y,isThreadedResponsesVisible:t,toggleThreadedResponses:function(){Re||Ee(),F(!1),n()},showThreadedResponses:function(){Re||(Ee(),C.event("response.expanded",{postId:p.id,parentPostId:y,rootPostId:ae,threadDepth:S,context:E.r.INLINE_POST_RESPONSE,source:w})),F(!1),o()},threadDepthFromRootPost:S,threadDepthOnPage:x,hideCreateReply:i,toggleCreateReply:a,loadThreadedResponses:Ee,isThreadedResponsesQueryCalled:Re,isThreadedResponsesQueryLoading:Pe,showContinueThisThreadSidebar:function(){ue(p)}}},u.createElement("div",{ref:0===b?fe:void 0},function(e){switch(e.inResponseToType){case G.STORY:case G.LEGACY:return e.content.bodyModel.paragraphs.every((function(e){return e.type===H.NJ.P&&0===e.markups.length}));default:return!0}}(p)?u.createElement(_,{responsePost:p,index:b,parentPost:d,omitBottomBorder:!0}):u.createElement(j.cW,{source:{index:b},key:p.id,extendSource:!0},u.createElement(J,{storyResponse:p,parentPost:d,omitBottomBorder:!0}))),s&&u.createElement("div",{className:T(re(D,t))},u.createElement(j.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(h.z,null,u.createElement(X.Z,{parentPostId:p.id,hideReplyEditing:i,placeholder:l,showEditorHeader:!1}))))),t&&u.createElement("div",{className:T(re(D,we))},Pe&&u.createElement(ee.xu,{marginLeft:"24px"},u.createElement(B,null)),(null==Se?void 0:Se.posts)&&(null==Se||null===(r=Se.posts)||void 0===r?void 0:r.length)>0&&u.createElement(R.D.Provider,{value:{setIsSavingResponse:z,responsesLocked:V,isLockedResponse:$,editingResponsesAtIndices:de,setEditingResponsesAtIndices:me,inResponseToQuote:K,setInResponseToQuote:q,sidebarRef:W,responseDistribution:Y,setResponseDistribution:ne,responseSortType:oe,rootPostId:ae,isResponsesSidebarVisible:le}},u.createElement(ie,{replies:Se,parentPost:d,inResponseToPostId:p.id,threadDepthOnPage:x+1,threadDepthFromRootPost:S+1,isShowAutoExpandedResponse:U,autoExpandedResponseIds:k}))),we&&(t||U)&&u.createElement(ee.xu,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},u.createElement(L.F,{color:"ACCENT",scale:"M"},u.createElement(ee.rU,{linkStyle:"OBVIOUS",onClick:function(){U?(F(!1),o()):Oe()}},function(e,t){return e?"Show ".concat(t," more ").concat(g()("reply",t)):"Load more replies (".concat(t,")")}(U,De)))))}))}))},le=n(85094),ue=n(33914);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var pe=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.99 5.04c.26-.21.64-.22.91-.01.97.72 1.77 1.21 2.6 1.54.83.32 1.72.48 2.89.5.41.01.74.35.74.76-.02 3.62-.43 6.26-1.45 8.21-1.03 1.98-2.66 3.21-4.97 4.08a.75.75 0 0 1-.53 0c-2.25-.87-3.86-2.1-4.9-4.07-1.02-1.95-1.46-4.59-1.48-8.22 0-.41.33-.75.75-.76 1.19-.02 2.1-.18 2.92-.5.82-.32 1.6-.81 2.52-1.53zm.46.9c-.9.69-1.71 1.21-2.62 1.56a8.9 8.9 0 0 1-3.02.57c.03 3.45.46 5.82 1.36 7.51.88 1.69 2.25 2.77 4.28 3.57 2.1-.8 3.47-1.89 4.34-3.57.89-1.7 1.3-4.07 1.34-7.51a8.8 8.8 0 0 1-3-.57 11.8 11.8 0 0 1-2.68-1.56zm0 9.15a2.67 2.67 0 1 0 0-5.34 2.67 2.67 0 0 0 0 5.34zm0 1a3.67 3.67 0 1 0 0-7.34 3.67 3.67 0 0 0 0 7.34zm-1.82-3.77l.53-.53.91.92 1.63-1.63.52.53-2.15 2.15-1.44-1.44z"});const de=function(e){return u.createElement("svg",ce({width:25,height:25,viewBox:"0 0 25 25"},e),pe)};var me,fe=function(){var e=(0,M.Iq)();return u.createElement(ue._,{tooltipText:"View community guidelines"},u.createElement(A.rU,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},u.createElement(de,null)))};!function(e){e.RESPONSES_SIDEBAR="web-inline-responses-sidebar"}(me||(me={}));var ve=n(34675),ge=n(6688),he=n(93394),Ee=n(32262),be=n(67297),Re=n(31078),ye={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},Pe=function(e){var t=e.parentPostId,n=e.responsesLocked,o=e.isPopoverMenuVisible,r=e.hidePopoverMenu,s=(0,ge.I)(),i=(0,be.v9)((function(e){return e.config.authDomain})),a=u.useRef(null);return u.useEffect((function(){var e=function(e){var t;null!=a&&null!==(t=a.current)&&void 0!==t&&t.contains(e.target)||r()};if(o)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[o]),u.createElement("div",{className:s(ye),ref:a},u.createElement(Ee.mX,null,u.createElement(Ee.Sl,null,u.createElement(A.rU,{href:(0,$.t$b)(i,t)},"Manage responses")),u.createElement(Re.Eq,{parentPostId:t,responsesLocked:n,hidePopoverMenu:r})))},xe=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},Se=function(e){var t,n,o=e.parentPost,r=e.responsesLocked,s=(0,ge.I)(),a=(0,ve.Hk)().value,l="managementPopoverMenu",c=u.useState(!1),p=i()(c,2),d=p[0],m=p[1],f=(null==a?void 0:a.id)===(null===(t=o.creator)||void 0===t?void 0:t.id),v=null==o||null===(n=o.collection)||void 0===n?void 0:n.viewerEdge.isEditor;return f||v?u.createElement(A.xu,null,u.createElement(A.rU,{ariaControls:l,ariaExpanded:d?"true":"false",onClick:function(e){e.nativeEvent.stopPropagation(),m(!d)},inline:!0,className:s(xe)},u.createElement(he.Z,null)),d&&u.createElement("div",{id:l,className:s({position:"relative"})},u.createElement(j.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},u.createElement(Pe,{parentPostId:o.id,responsesLocked:r,isPopoverMenuVisible:d,hidePopoverMenu:function(){return m(!1)}})))):null},Oe=n(3149),Ie=n(31235);function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var De=u.createElement("path",{d:"M13.4 16.96l-6.48-6.48L13.4 4l.8.71-5.77 5.77 5.77 5.77z",fillRule:"evenodd"});const we=function(e){return u.createElement("svg",Te({width:21,height:21},e),De)};var Ce={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},ke={fontSize:"12px",textTransform:"uppercase"},je=function(e){var t,n,o,r,s=e.responses,a=e.parentPost,l=e.responsesLocked,c=e.isLockedResponse,p=e.isLoadingInitialContent,m=e.isFetchingNextSetOfResponses,f=e.isResponsesSidebarVisible,v=e.closeSidebar,g=e.inResponseToQuote,h=e.setInResponseToQuote,E=e.sidebarRef,b=e.responseDistribution,y=e.setResponseDistribution,P=e.responseSortType,x=e.setResponseSortType,S=e.rootPostId,O=e.postDepth,I=e.isContinueThisThread,T=e.showPreviousSidebar,D=e.showCreateReplyEditor,w=void 0!==D&&D,C=(0,M.Iq)(),_=(0,te.Av)(),N=(0,j.pK)(),U=(0,Ie.xg)(),F=u.useState(!1),Q=i()(F,2),V=Q[0],$=Q[1],K=u.useState([]),q=i()(K,2),z=q[0],W=q[1],G=a.id,Y=(null===(t=a.postResponses)||void 0===t?void 0:t.count)||0,J=I?"Thread":"Responses"+(Y>0?" (".concat(Y,")"):""),Z=s,X=null==s||null===(n=s.pagingInfo)||void 0===n?void 0:n.next,ee=(null==s?void 0:s.posts)&&Y&&s.posts.length<Y,ne=Boolean(m&&X&&ee),oe=(o={},d()(o,H.sV.TOP,"Most relevant"),d()(o,H.sV.REVERSE_CHRON,"Most recent"),o),re=[{label:oe[H.sV.TOP],value:H.sV.TOP,index:0},{label:oe[H.sV.REVERSE_CHRON],value:H.sV.REVERSE_CHRON,index:1}],se=re.findIndex((function(e){return e.value===P})),ae=u.useState(re[se]),ue=i()(ae,2),ce=ue[0],pe=ue[1];return u.createElement(R.D.Provider,{value:{setIsSavingResponse:$,responsesLocked:l,isLockedResponse:c,editingResponsesAtIndices:z,setEditingResponsesAtIndices:W,inResponseToQuote:g,setInResponseToQuote:h,sidebarRef:E,responseDistribution:b,setResponseDistribution:y,responseSortType:P,rootPostId:S,isResponsesSidebarVisible:f,showCreateReplyEditor:w}},f&&V&&u.createElement(A.TF,{horizontalOverride:{left:"calc(100vw - ".concat(Le,")")}}),u.createElement(A.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},u.createElement(A.xu,{display:"flex",flexDirection:"row"},I&&u.createElement(A.xu,{paddingRight:"18px"},u.createElement(L.X6,{scale:"S"},u.createElement(A.rU,{onClick:T,"data-testid":"back-button","aria-label":"back"},u.createElement(we,{height:"26px",width:"26px"})))),u.createElement(L.X6,{scale:"S"},J)),u.createElement(A.xu,{display:"flex",flexDirection:"row"},u.createElement(fe,null),u.createElement(Se,{parentPost:a,responsesLocked:l}),u.createElement(A.xu,{position:"relative",right:"-7px"},u.createElement(Oe.P,{onClick:v,size:"REGULAR",isPositionAbsolute:!1})))),p?u.createElement(A.xu,{padding:"0 24px"},u.createElement(B,null)):u.createElement(u.Fragment,null,I||U&&!f?null:u.createElement(u.Fragment,null,u.createElement(k,{parentPostId:G}),s&&u.createElement(A.xu,{borderBottom:"BASE_LIGHTER",padding:"20px 20px 12px 20px",marginBottom:"16px"},u.createElement(le.T,{activeStyle:"CHECK",onSelect:function(e){pe(e),x(e.value),_.event("responses.sort",{postId:G,context:me.RESPONSES_SIDEBAR,sortType:e.value,source:N})},options:re,savedOption:ce,inactiveLabelComponent:ce&&u.createElement(A.xu,null,u.createElement("strong",{className:C(ke)},ce.label)),width:"max-content"}))),s&&0!==(null==Z||null===(r=Z.posts)||void 0===r?void 0:r.length)?u.createElement(A.xu,null,u.createElement(ie,{replies:s,inResponseToPostId:a.id,parentPost:a,displayBottomBorder:ne,threadDepthFromRootPost:O+1}),ne&&u.createElement(A.xu,{margin:"0 24px"},u.createElement(B,null))):u.createElement("div",{className:C(Ce)},u.createElement(L.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),u.createElement(L.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},_e=n(324),Ae=n(80637);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function(e){var t={top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,pointerEvents:"none"};return e&&(t.transition="opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"),t},Le="414px",Ue=function(e,t){return function(n){var o=d()({width:Le,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,Ae.sm)(n),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"});return e||(o.visibility="hidden"),t||(o.transition="transform 0s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0s cubic-bezier(0.23, 1, 0.32, 1) 0s"),o}},He=function(e,t){return function(n){if(e){var o=n.breakpoints.md-.02;return t<=o?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},Fe=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},Qe=function(e){var t,n,o,r,s,a,l,c,p,d,v=e.isResponsesSidebarVisible,g=e.inResponseToQuote,h=e.setInResponseToQuote,E=e.parentPost,b=e.continueThisThreadPost,R=e.continueThisThreadPostDepth,y=e.showPreviousSidebar,P=e.cleanupSidebar,x=e.initialSidebarRender,S=(0,M.Iq)(),O=(0,Ie.xg)(),I=u.useState(H.sV.TOP),T=i()(I,2),D=T[0],w=T[1],C=u.useRef(null),k=(0,m.useLazyQuery)(f.A,{variables:{postId:E.id,postResponsesPaging:{limit:10},sortType:D},ssr:!1}),_=i()(k,2),N=_[0],B=_[1],L=B.called,U=B.loading,F=B.data,Q=B.fetchMore;L||b||O&&!v||N();var V=null==F||null===(t=F.post)||void 0===t?void 0:t.responsesLocked,$=null==F||null===(n=F.post)||void 0===n?void 0:n.isLockedResponse,K=null==F||null===(o=F.post)||void 0===o?void 0:o.threadedPostResponses,q=!1;if(b){var z,W,G,Y=(null===(z=b.threadedPostResponses)||void 0===z?void 0:z.posts)||[];q=Y.length<1,K={posts:[Ne(Ne({},b),{},{threadedPostResponses:{posts:Y,autoExpandedPostIds:null!==(W=b.threadedPostResponses)&&void 0!==W&&W.posts?null===(G=b.threadedPostResponses)||void 0===G?void 0:G.posts.map((function(e){return e.id})):[],pagingInfo:null,__typename:"ThreadedPostResponseConnection"}})],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"}}!v&&x&&(K={posts:[],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"});var J,Z=(null==F||null===(r=F.post)||void 0===r||null===(s=r.responseRootPost)||void 0===s||null===(a=s.post)||void 0===a?void 0:a.id)||"",X=R||(null==F||null===(l=F.post)||void 0===l||null===(c=l.responseRootPost)||void 0===c?void 0:c.responseDepth)||0,ee=u.useState(0),te=i()(ee,2),ne=te[0],oe=te[1],re=u.useState(!1),ie=i()(re,2),ae=ie[0],le=ie[1],ue=u.useState(H.Et.NOT_DISTRIBUTED),ce=i()(ue,2),pe=ce[0],de=ce[1];u.useEffect((function(){ne||oe(window.innerWidth)}),[]);var me=null===(p=K)||void 0===p||null===(d=p.pagingInfo)||void 0===d?void 0:d.next;me&&!b&&(J=function(){Q&&Q({variables:{postId:E.id,postResponsesPaging:{limit:me.limit,to:me.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return le(!1),se(e,n)}})});var fe=function(){de(H.Et.NOT_DISTRIBUTED),P()};return u.createElement(_e.N8,null,u.createElement(j.cW,{source:{name:"responses",postId:E.id},extendSource:!0},u.createElement(A.xu,{print:{display:"none"}},u.createElement("div",{className:S([Be(x),Fe(v)]),onClick:fe,onKeyUp:function(e){13===e.keyCode&&fe()},"aria-hidden":!v,role:"presentation"}),u.createElement("div",{className:S([Ue(v,x),He(v,ne)]),"aria-hidden":!v,onScroll:function(e){return Ve(e,me,ae,le,J)},ref:C},u.createElement(je,{responses:K,parentPost:E,responsesLocked:V,isLockedResponse:$,isLoadingInitialContent:U,isFetchingNextSetOfResponses:ae,isResponsesSidebarVisible:v,closeSidebar:fe,showPreviousSidebar:y,inResponseToQuote:g,setInResponseToQuote:h,sidebarRef:C,responseDistribution:pe,setResponseDistribution:de,responseSortType:D,setResponseSortType:w,rootPostId:Z,postDepth:X,isContinueThisThread:!!b,showCreateReplyEditor:q})))))},Ve=function(e,t,n,o,r){e.preventDefault();var s=e.currentTarget;s.scrollHeight-s.scrollTop-s.clientHeight<1.5*s.clientHeight&&t&&!n&&(o(!0),r())},$e=n(72955),Ke=n(8403),qe=3,ze=function(e){var t=e.children,n=e.post,o=u.useState(!1),s=i()(o,2),a=s[0],p=s[1],d=(0,M.Fg)(),m=!!(0,Ke.Wd)("responsesOpen"),f=u.useState(!1),v=i()(f,2),g=v[0],h=v[1],E=u.useRef(!0),b=u.useState(void 0),R=i()(b,2),y=R[0],P=R[1],x=u.useRef(0),S=u.useState(!1),O=i()(S,2),I=O[0],T=O[1],D=u.useState([]),w=i()(D,2),C=w[0],k=w[1],j=function(){k(l()(C))},_=function(){h(!1),k([]),E.current=!0};u.useEffect((function(){T(!0),h(m)}),[m]);var A=function(){window.innerWidth<d.breakpoints.md&&p(!0)};return u.useEffect((function(){return A(),$e.V6.on("resize",A),function(){return $e.V6.off("resize",A)}}),[]),u.useEffect((function(){var e,t,n=null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.documentElement;return a&&null!=n&&n.style&&(g?(n.style.top="-".concat(x.current,"px"),x.current=n.scrollTop,n.style.overflow="hidden",n.style.position="fixed"):(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=x.current)),function(){a&&null!=n&&n.style&&(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=x.current)}}),[g]),u.createElement(c.f.Provider,{value:{openSidebarToRespondToHighlight:function(e){P(e),h(!0)},addContinueThisThreadSidebar:function(e){E.current=!1,k([].concat(r()(C),[e]))}}},I&&u.createElement(Qe,{isResponsesSidebarVisible:g&&0===C.length,parentPost:n,inResponseToQuote:y,setInResponseToQuote:P,showPreviousSidebar:j,cleanupSidebar:_,initialSidebarRender:E.current}),I&&C.map((function(e,t,o){var r=(qe-1)*(t+1);return u.createElement(Qe,{key:n.id,isResponsesSidebarVisible:g&&t===o.length-1,parentPost:n,inResponseToQuote:y,setInResponseToQuote:P,continueThisThreadPost:e,continueThisThreadPostDepth:r,showPreviousSidebar:j,cleanupSidebar:_,initialSidebarRender:E.current})})),t({show:function(){return h(!0)}}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/5353.6c41fccc.chunk.js.map